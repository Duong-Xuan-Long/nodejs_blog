<!DOCTYPE html>
<!--
* CoreUI - Free Bootstrap Admin Template
* @version v4.2.1
* @link https://coreui.io
* Copyright (c) 2022 creativeLabs Łukasz Holeczek
* Licensed under MIT (https://coreui.io/license)
-->
<!-- Breadcrumb-->
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <base href="./">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="CoreUI - Open Source Bootstrap Admin Template">
    <meta name="author" content="Łukasz Holeczek">
    <meta name="keyword" content="Bootstrap,Admin,Template,Open,Source,jQuery,CSS,HTML,RWD,Dashboard">
    <title>UpdateProduct Page</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="apple-touch-icon" sizes="57x57" th:href="@{/assets/favicon/apple-icon-57x57.png}">
    <link rel="apple-touch-icon" sizes="60x60" th:href="@{/assets/favicon/apple-icon-60x60.png}">
    <link rel="apple-touch-icon" sizes="72x72" th:href="@{/assets/favicon/apple-icon-72x72.png}">
    <link rel="apple-touch-icon" sizes="76x76" th:href="@{/assets/favicon/apple-icon-76x76.png}">
    <link rel="apple-touch-icon" sizes="114x114" th:href="@{/assets/favicon/apple-icon-114x114.png}">
    <link rel="apple-touch-icon" sizes="120x120" th:href="@{/assets/favicon/apple-icon-120x120.png}">
    <link rel="apple-touch-icon" sizes="144x144" th:href="@{/assets/favicon/apple-icon-144x144.png}">
    <link rel="apple-touch-icon" sizes="152x152" th:href="@{/assets/favicon/apple-icon-152x152.png}">
    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/assets/favicon/apple-icon-180x180.png}">
    <link rel="icon" type="image/png" sizes="192x192" th:href="@{/assets/favicon/android-icon-192x192.png}">
    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/assets/favicon/favicon-32x32.png}">
    <link rel="icon" type="image/png" sizes="96x96" th:href="@{/assets/favicon/favicon-96x96.png}">
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/assets/favicon/favicon-16x16.png}">
    <link rel="manifest" th:href="@{/assets/favicon/manifest.json}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- Vendors styles-->
    <link rel="stylesheet" th:href="@{/vendors/simplebar/css/simplebar.css}">
    <link rel="stylesheet" th:href="@{/css/vendors/simplebar.css}">
    <!-- Main styles for this application-->
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <!-- We use those styles to show code examples, you should remove them in your application.-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism.css">
    <link th:href="@{/css/examples.css}" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics-->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118965717-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        // Shared ID
        gtag('config', 'UA-118965717-3');
        // Bootstrap ID
        gtag('config', 'UA-118965717-5');
    </script>
    <link th:href="@{/vendors/@coreui/chartjs/css/coreui-chartjs.css}" rel="stylesheet">
</head>
<body>
<div class="sidebar sidebar-dark sidebar-fixed" id="sidebar">
    <div class="sidebar-brand d-none d-md-flex">
        <svg class="sidebar-brand-full" width="118" height="46" alt="CoreUI Logo">
            <use th:xlink:href="@{/assets/brand/coreui.svg#full}"></use>
        </svg>
        <svg class="sidebar-brand-narrow" width="46" height="46" alt="CoreUI Logo">
            <use th:xlink:href="@{/assets/brand/coreui.svg#signet}"></use>
        </svg>
    </div>
    <ul class="sidebar-nav" data-coreui="navigation" data-simplebar="">
        <li class="nav-item"><a class="nav-link" th:href="@{/index}">
            <svg class="nav-icon">
                <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-speedometer}"></use>
            </svg>
            Dashboard<span class="badge badge-sm bg-info ms-auto">NEW</span></a></li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-cursor}"></use>
            </svg>
            Components</a>
            <ul class="nav-group-items">
                <li class="nav-item"><a class="nav-link" th:href="@{/categories/page/1}"><span class="nav-icon"></span>
                    Categories</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/products/page/1}"><span class="nav-icon"></span>
                    Products</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/customers/page/1}"><span class="nav-icon"></span>
                    Customers</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/orders/page/1}"><span class="nav-icon"></span>
                    Orders</a></li>
                <li th:if="${session.idAdmin!=null}" class="nav-item"><a class="nav-link" th:href="@{/update-admin/{id}(id=${session.idAdmin})}"><span class="nav-icon"></span>
                    Update Admin Account </a></li>
            </ul>
        </li>
        <li class="nav-item"><a class="nav-link" th:href="@{/logout}">
            <svg class="nav-icon">
                <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-cursor}"></use>
            </svg>
            Log out</a></li>

    </ul>
    <button class="sidebar-toggler" type="button" data-coreui-toggle="unfoldable"></button>
</div>
<div class="wrapper d-flex flex-column min-vh-100 bg-light">
    <header class="header header-sticky mb-4">
        <div class="container-fluid">
            <button class="header-toggler px-md-0 me-md-3" type="button"
                    onclick="coreui.Sidebar.getInstance(document.querySelector('#sidebar')).toggle()">
                <svg class="icon icon-lg">
                    <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-menu}"></use>
                </svg>
            </button>
            <a class="header-brand d-md-none" href="#">
                <svg width="118" height="46" alt="CoreUI Logo">
                    <use th:xlink:href="@{/assets/brand/coreui.svg#full}"></use>
                </svg>
            </a>
            <ul class="header-nav d-none d-md-flex">
                <li class="nav-item"><a class="nav-link" th:href="@{/index}">Dashboard</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Users</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/index}">Settings</a></li>
            </ul>
            <ul class="header-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="#">
                    <svg class="icon icon-lg">
                        <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-bell}"></use>
                    </svg>
                </a></li>
                <li class="nav-item"><a class="nav-link" href="#">
                    <svg class="icon icon-lg">
                        <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-list-rich}"></use>
                    </svg>
                </a></li>
                <li class="nav-item"><a class="nav-link" href="#">
                    <svg class="icon icon-lg">
                        <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-envelope-open}"></use>
                    </svg>
                </a></li>
            </ul>
            <ul class="header-nav ms-3">
                <li class="nav-item dropdown"><a class="nav-link py-0" data-coreui-toggle="dropdown" href="#"
                                                 role="button" aria-haspopup="true" aria-expanded="false">
                    <div class="avatar avatar-md"><img class="avatar-img" th:src="@{'data:image/jpeg;base64,' + ${session.adminSrc}}"
                                                       alt="user@email.com"></div>
                </a>
                    <div class="dropdown-menu dropdown-menu-end pt-0">
                        <div class="dropdown-header bg-light py-2">
                            <div class="fw-semibold">Account</div>
                        </div>
                        <a class="dropdown-item" href="#">
                            <svg class="icon me-2">
                                <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-bell}"></use>
                            </svg>
                            Updates<span class="badge badge-sm bg-info ms-2">42</span></a><a class="dropdown-item"
                                                                                             href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-envelope-open}"></use>
                        </svg>
                        Messages<span class="badge badge-sm bg-success ms-2">42</span></a><a class="dropdown-item"
                                                                                             href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-task}"></use>
                        </svg>
                        Tasks<span class="badge badge-sm bg-danger ms-2">42</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-comment-square}"></use>
                        </svg>
                        Comments<span class="badge badge-sm bg-warning ms-2">42</span></a>
                        <div class="dropdown-header bg-light py-2">
                            <div class="fw-semibold">Settings</div>
                        </div>
                        <a class="dropdown-item" href="#">
                            <svg class="icon me-2">
                                <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-user}"></use>
                            </svg>
                            Profile</a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-settings}"></use>
                        </svg>
                        Settings</a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-credit-card}"></use>
                        </svg>
                        Payments<span class="badge badge-sm bg-secondary ms-2">42</span></a><a class="dropdown-item"
                                                                                               href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-file}"></use>
                        </svg>
                        Projects<span class="badge badge-sm bg-primary ms-2">42</span></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">
                            <svg class="icon me-2">
                                <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-lock-locked}"></use>
                            </svg>
                            Lock Account</a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                            <use th:xlink:href="@{/vendors/@coreui/icons/svg/free.svg#cil-account-logout}"></use>
                        </svg>
                        Logout</a>
                    </div>
                </li>
            </ul>
        </div>
        <div class="header-divider"></div>
        <div class="container-fluid">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb my-0 ms-2">
                    <li class="breadcrumb-item">
                        <!-- if breadcrumb is single--><span>Home</span>
                    </li>
                    <li class="breadcrumb-item active"><span>Dashboard</span></li>
                </ol>
            </nav>
        </div>
    </header>
    <div class="body flex-grow-1 px-3">

        <div th:if="${size==0}">
            <p>No Products </p>
        </div>
        <div class="input-group mb-3">
            <form th:action="@{/search-products/page/1}" method="get">
                <div class="d-flex flex-row">
                    <input name="keyword" type="text" class="form-control" placeholder="Search Products"
                           aria-label="Recipient's username" aria-describedby="button-addon2" style="width:100%;">
                    <button class="btn btn-outline-secondary ms-3" type="submit" id="button-addon2">Search</button>
                </div>
            </form>
        </div>
        <a class="btn btn-primary mx-3" th:href="@{/add-product}">
            Create a new Product
        </a>
        <div class="container-lg">
            <div th:if="${success}" class="text-center alert alert-success">
                <p th:text="${success}"></p>
            </div>
            <div th:if="${failed}" class="text-center alert alert-danger">
                <p th:text="${failed}"></p>
            </div>
            <table class="table" th:if="${size>0}">
                <thead>
                <tr>
                    <th scope="col">ProductIndex</th>
                    <th scope="col">Name</th>
                    <th scope="col">Category</th>
                    <th scope="col">Cost</th>
                    <th scope="col">CurrentQuantity</th>
                    <th scope="col">Image</th>
                    <th scope="col">Update</th>
                    <th scope="col">Action</th>
                    <th scope="col">Hard Delete</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="product:${products}">
                    <th scope="row" th:text="${product.id}"></th>
                    <td th:text="${product.name}"></td>
                    <td th:text="${product.category!=null?product.category.name:null}"></td>
                    <td th:text="${product.costPrice}"></td>
                    <td th:text="${product.currentQuantity}"></td>
                    <td><img src="" style="height: 40px; width: 40px;"
                             th:src="*{'data:image/jpeg;base64,' +{product.image}}"></td>
                    <td><a th:href="@{/update-product/{id} (id = ${product.id})}" class="btn btn-warning">Update</a>
                    </td>
                    <td>
                        <a th:if="${product.is_activated == false}"
                           th:href="@{/enable-product/{id} (id = ${product.id})}" class="btn btn-primary">Enable</a>
                        <a th:if="${product.is_deleted == false}" th:href="@{/delete-product/{id} (id = ${product.id})}"
                           class="btn btn-danger">Delete</a>
                    </td>
                    <td><a th:href="@{/hard-delete-product/{id} (id = ${product.id})}" class="btn btn-outline-primary">Hard
                        Delete</a></td>

                </tr>
                </tbody>
            </table>

            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li th:if="${currentPage != 1}" class="page-item">
                        <a th:href="@{'/search-products/page/' + ${currentPage - 1}+'/?keyword='+${keyword}}" class="page-link" href="#">Previous</a>
                    </li>
                    <li th:each="i : ${#numbers.sequence(1, totalPages)}"
                        th:classappend="${currentPage == i ? 'active' : ''}" class="page-item">
                        <a th:href="@{'/search-products/page/' + ${i }+'/?keyword='+${keyword}}" class="page-link"><span th:text="${i}"></span></a>
                    </li>
                    <li th:if="${currentPage != totalPages}" class="page-item">
                        <a th:href="@{'/search-products/page/' + ${currentPage + 1}+'/?keyword='+${keyword}}" class="page-link">Next</a>
                    </li>
                </ul>
            </nav>
        </div>


        <!-- boostrap js-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
                crossorigin="anonymous"></script>
        <!--Jquery js-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
                integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
                crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!--axios-->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <!-- CoreUI and necessary plugins-->
        <script th:src="@{/vendors/@coreui/coreui/js/coreui.bundle.min.js}"></script>
        <script src="/vendors/simplebar/js/simplebar.min.js"></script>
        <!-- Plugins and scripts required by this view-->
        <script th:src="@{/vendors/chart.js/js/chart.min.js}"></script>
        <script th:src="@{/vendors/@coreui/chartjs/js/coreui-chartjs.js}"></script>
        <script th:src="@{/vendors/@coreui/utils/js/coreui-utils.js}"></script>
        <script th:src="@{/js/main.js}"></script>
        <script th:src="@{js/products.js}"></script>
    </div>
</div>
</body>
</html>